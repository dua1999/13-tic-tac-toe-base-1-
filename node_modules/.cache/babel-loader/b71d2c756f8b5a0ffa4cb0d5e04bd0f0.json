{"ast":null,"code":"import { GameResult, Player, SquareValue } from \"./types\";\nexport var initialState = {\n  board: Array(9).fill(0),\n  result: GameResult.PENDING,\n  nextPlayer: Player.X\n};\nexport function reducer(state, selectedCell) {\n  if (state.result !== GameResult.PENDING) {\n    // Reset game.\n    state = initialState;\n  }\n  if (state.board[selectedCell] !== SquareValue.EMPTY) {\n    return state;\n  }\n  var board = state.board.map(function (square, index) {\n    return index === selectedCell ? state.nextPlayer : square;\n  });\n  var result = ticTacToeResult(board);\n  var nextPlayer = state.nextPlayer !== Player.X ? Player.X : Player.O;\n  return {\n    board: board,\n    result: result,\n    nextPlayer: nextPlayer\n  };\n}","map":{"version":3,"names":["GameResult","Player","SquareValue","initialState","board","Array","fill","result","PENDING","nextPlayer","X","reducer","state","selectedCell","EMPTY","map","square","index","ticTacToeResult","O"],"sources":["C:/Users/duaaa/Downloads/13-tic-tac-toe-base(1)/src/state.tsx"],"sourcesContent":["import { GameResult, State, Player, SquareValue, Board } from \"./types\";\n\ndeclare global {\n  var ticTacToeResult: (board: Board) => GameResult\n}\n\nexport const initialState: State = {\n  board: Array(9).fill(0),\n  result: GameResult.PENDING,\n  nextPlayer: Player.X\n};\n\nexport function reducer(state: State, selectedCell: number) {\n  if (state.result !== GameResult.PENDING) {\n    // Reset game.\n    state = initialState;\n  }\n  if (state.board[selectedCell] !== SquareValue.EMPTY) {\n    return state;\n  }\n\n  const board = state.board.map((square, index) =>\n    index === selectedCell\n      ? ((state.nextPlayer as number) as SquareValue)\n      : square\n  );\n\n  const result = ticTacToeResult(board);\n  const nextPlayer = state.nextPlayer !== Player.X ? Player.X : Player.O;\n  return {\n    board,\n    result,\n    nextPlayer\n  };\n}\n"],"mappings":"AAAA,SAASA,UAAU,EAASC,MAAM,EAAEC,WAAW,QAAe,SAAS;AAMvE,OAAO,IAAMC,YAAmB,GAAG;EACjCC,KAAK,EAAEC,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;EACvBC,MAAM,EAAEP,UAAU,CAACQ,OAAO;EAC1BC,UAAU,EAAER,MAAM,CAACS;AACrB,CAAC;AAED,OAAO,SAASC,OAAOA,CAACC,KAAY,EAAEC,YAAoB,EAAE;EAC1D,IAAID,KAAK,CAACL,MAAM,KAAKP,UAAU,CAACQ,OAAO,EAAE;IACvC;IACAI,KAAK,GAAGT,YAAY;EACtB;EACA,IAAIS,KAAK,CAACR,KAAK,CAACS,YAAY,CAAC,KAAKX,WAAW,CAACY,KAAK,EAAE;IACnD,OAAOF,KAAK;EACd;EAEA,IAAMR,KAAK,GAAGQ,KAAK,CAACR,KAAK,CAACW,GAAG,CAAC,UAACC,MAAM,EAAEC,KAAK;IAAA,OAC1CA,KAAK,KAAKJ,YAAY,GAChBD,KAAK,CAACH,UAAU,GAClBO,MAAM;EAAA,EACX;EAED,IAAMT,MAAM,GAAGW,eAAe,CAACd,KAAK,CAAC;EACrC,IAAMK,UAAU,GAAGG,KAAK,CAACH,UAAU,KAAKR,MAAM,CAACS,CAAC,GAAGT,MAAM,CAACS,CAAC,GAAGT,MAAM,CAACkB,CAAC;EACtE,OAAO;IACLf,KAAK,EAALA,KAAK;IACLG,MAAM,EAANA,MAAM;IACNE,UAAU,EAAVA;EACF,CAAC;AACH"},"metadata":{},"sourceType":"module"}